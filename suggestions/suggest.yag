{{/*
	Command that sends suggestions to a different channel in embed form so they can be voted on. Requires the reaction listener.
	
	Trigger type: Command
	Trigger: suggest
	
	Usage:
	-suggest <suggestion message>
	
	Credits: 2x2Master1 <https://github.com/2x2master1>
	Feel free to DM me if you have any questions or problems!
*/}}

{{/* Configuration area starts */}}
{{$suggestionChannel := "835485138137251852"}}{{/* ID of the suggestion channel */}}
{{/* Configuration area ends */}}

{{if .CmdArgs}}
    {{$m := false}}
    {{$image := false}}
    {{if .Message.Attachments}}
        {{$image = (index .Message.Attachments 0).ProxyURL}}
    {{end}}
    {{if not $image}}
        {{$m = sendMessageRetID $suggestionChannel (complexMessage "content" (print "**Suggestion by " .User.Mention "**") "embed" (cembed "description" (print (reReplace `(.*)\n{2,}(.*)` .StrippedMsg "$1\n$2") "\n\nUpvotes: 0 (0%)\nDownvotes: 0 (0%)") "color" 0x00bbff))}}
        {{addMessageReactions $suggestionChannel $m "🟢" "🔴" "🔘"}}
        {{addReactions "👍"}}
    {{else}}
        {{$m = sendMessageRetID $suggestionChannel (complexMessage "content" (print "**Suggestion by " .User.Mention "**") "embed" (cembed "description" (print (reReplace `(.*)\n{2,}(.*)` .StrippedMsg "$1\n$2") "\n\nUpvotes: 0 (0%)\nDownvotes: 0 (0%)") "image" (sdict "url" $image) "color" 0x00bbff))}}
        {{addMessageReactions $suggestionChannel $m "🟢" "🔴" "🔘"}}
        {{addReactions "👍"}}
    {{end}}
    {{deleteTrigger 5}}
{{else}}
    You can't submit empty suggestions.
    {{deleteTrigger 10}}
    {{deleteResponse 10}}
{{end}}
